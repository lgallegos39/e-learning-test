<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="x-ua-compatible" content="ie=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>E-Learning</title>
<link rel="stylesheet" href="style/foundation.css">
<link rel="stylesheet" type="text/css" href="style/style.css">
</head>
<body>
<!--Nav bar-->
<!-- landing screen -->
<section class="intro" id="landing-content">

  <div class="inner">
    <div class="sp-content">
    <h2> The Matching Game </h2>
    <p>
Turn over any two cards.
If the two cards match, keep them.
If they don't match, try again.
Remember what was on each card and where it was.
Watch and remember during the other player's turn.
The game is over when all the cards have been matched.</p>
    <a class="btn startBtn" href="#"> Start </a> <br> <br>
       <a class="btn skip-btn" href="#"> Skip </a>
    </div>
  </div>
</section>
<!-- The Actual Page -->
<div class="grid-container">
<nav class="grid-x grid-padding-x">
<div class="top-bar-left large-4 cell">
  <h1> The Interns </h1>
  </div>
  <div class="large-8 cell nav-right">
 <ul class="menu">
   <li class="menu-nav btn">
   Menu
   </li>
   <li class="help-nav btn ">
     Help
   </li>
   <li class="exit-nav btn">
     Exit
   </li>
 </ul>
</div>
</nav>
<div class="grid-x main-content">
  <div class="large-3 cell rules">6 cells</div>
  <div class="large-9 cell"><div class="wrap"><div class="game"></div></div></div>
</div>
<!-- landing screen -->
<section class="container" id="landing-content">

</section>
<!-- The Acutal Page -->
 <article>
  <div class="grid-x main-content ">
  <div class="cell small-6" style="background-color: #000; height: 100px">
  </div>
  <div class="cell small-6" style="background-color: #fff; height: 100px"></div>
  </div>
</article>
</div>

<script src="node_modules/jquery/dist/jquery.min.js"></script>
<script src="node_modules/handlebars/dist/handlebars.min.js"></script>
<script src="js/velocity.min.js"></script>
<script src="js/velocity.ui.js"></script>
<script src="js/vendor/what-input.js"></script>
<script src="js/main.js"></script>
<script src="js/vendor/foundation.min.js"></script>
<script src="js/vendor/jquery.js"></script>
<script src="js/app.js"></script>
<script src="js/main.js"></script>
<script src="js/foundation.js"></script>
<script>
  $(document).foundation();
</script>
  <script>
  (function() {

    var Memory = {

      init: function(cards) {
        this.$game = $(".game");
        this.$modal = $(".modal");
        this.$overlay = $(".modal-overlay");
        this.$restartButton = $("button.restart");
        this.cardsArray = $.merge(cards, cards);
        this.shuffleCards(this.cardsArray);
        this.setup();
      },

      shuffleCards: function(cardsArray) {
        this.$cards = $(this.shuffle(this.cardsArray));
      },

      setup: function() {
        this.html = this.buildHTML();
        this.$game.html(this.html);
        this.$memoryCards = $(".card");
        this.binding();
        this.paused = false;
        this.guess = null;
      },

      binding: function() {
        this.$memoryCards.on("click", this.cardClicked);
        this.$restartButton.on("click", $.proxy(this.reset, this));
      },
      // kinda messy but hey
      cardClicked: function() {
        var _ = Memory;
        var $card = $(this);
        if (!_.paused && !$card.find(".inside").hasClass("matched") && !$card.find(".inside").hasClass("picked")) {
          $card.find(".inside").addClass("picked");
          if (!_.guess) {
            _.guess = $(this).attr("data-id");
          } else if (_.guess == $(this).attr("data-id") && !$(this).hasClass("picked")) {
            $(".picked").addClass("matched");
            _.guess = null;
          } else {
            _.guess = null;
            _.paused = true;
            setTimeout(function() {
              $(".picked").removeClass("picked");
              Memory.paused = false;
            }, 600);
          }
          if ($(".matched").length == $(".card").length) {
            _.win();
          }
        }
      },

      win: function() {
        this.paused = true;
        setTimeout(function() {
          Memory.showModal();
          Memory.$game.fadeOut();
        }, 1000);
      },

      showModal: function() {
        this.$overlay.show();
        this.$modal.fadeIn("slow");
      },

      hideModal: function() {
        this.$overlay.hide();
        this.$modal.hide();
      },

      reset: function() {
        this.hideModal();
        this.shuffleCards(this.cardsArray);
        this.setup();
        this.$game.show("slow");
      },

      // Fisher--Yates Algorithm -- https://bost.ocks.org/mike/shuffle/
      shuffle: function(array) {
        var counter = array.length,
          temp, index;
        // While there are elements in the array
        while (counter > 0) {
          // Pick a random index
          index = Math.floor(Math.random() * counter);
          // Decrease counter by 1
          counter--;
          // And swap the last element with it
          temp = array[counter];
          array[counter] = array[index];
          array[index] = temp;
        }
        return array;
      },

      buildHTML: function() {
        var frag = '';
        this.$cards.each(function(k, v) {
          frag += '<div class="card" data-id="' + v.id + '"><div class="inside">\
        <div class="front"><img src="' + v.img + '"\
        alt="' + v.name + '" /></div>\
        <div class="back"><img src="img/200271-200.png"\
        alt="Codepen" /></div></div>\
        </div>';
        });
        return frag;
      }
    };
    var cards = [{
      name: "php",
      img: "img/php_logo1600.png",
      id: 1,
    }, {
      name: "html5",
      img: "img/HTML5_Badge_512.png",
      id: 2
    }, {
      name: "jquery",
      img: "img/jQurery.gif",
      id: 3
    }, {
      name: "python",
      img: "img/python.png",
      id: 4
    }, {
      name: "rails",
      img: "img/Ruby_on_Rails-logo.png",
      id: 5
    }, {
      name: "wordpress",
      img: "img/wordpress-logo-notext-rgb.png",
      id: 6
    }];

    Memory.init(cards);

  })();
  </script>
</body>
</html>